// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace Tarea_9.Pages
{
    #line hidden
    using System;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\a\Downloads\ITLA-seaon 6\Prog 3\T9\Tarea9-P3\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\a\Downloads\ITLA-seaon 6\Prog 3\T9\Tarea9-P3\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\a\Downloads\ITLA-seaon 6\Prog 3\T9\Tarea9-P3\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\a\Downloads\ITLA-seaon 6\Prog 3\T9\Tarea9-P3\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\a\Downloads\ITLA-seaon 6\Prog 3\T9\Tarea9-P3\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\a\Downloads\ITLA-seaon 6\Prog 3\T9\Tarea9-P3\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\a\Downloads\ITLA-seaon 6\Prog 3\T9\Tarea9-P3\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\a\Downloads\ITLA-seaon 6\Prog 3\T9\Tarea9-P3\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\a\Downloads\ITLA-seaon 6\Prog 3\T9\Tarea9-P3\_Imports.razor"
using Tarea_9;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\a\Downloads\ITLA-seaon 6\Prog 3\T9\Tarea9-P3\_Imports.razor"
using Tarea_9.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\a\Downloads\ITLA-seaon 6\Prog 3\T9\Tarea9-P3\_Imports.razor"
using Tarea_9.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\a\Downloads\ITLA-seaon 6\Prog 3\T9\Tarea9-P3\_Imports.razor"
using System.Net;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\a\Downloads\ITLA-seaon 6\Prog 3\T9\Tarea9-P3\_Imports.razor"
using System.Collections.Generic;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\a\Downloads\ITLA-seaon 6\Prog 3\T9\Tarea9-P3\_Imports.razor"
using Radzen;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\Users\a\Downloads\ITLA-seaon 6\Prog 3\T9\Tarea9-P3\_Imports.razor"
using Radzen.Blazor;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/")]
    public partial class Index : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#nullable restore
#line 178 "C:\Users\a\Downloads\ITLA-seaon 6\Prog 3\T9\Tarea9-P3\Pages\Index.razor"
      
    //Strings de los Select
    String provincia = "-- Sin seleccionar --";
    String TipoSangre = "-- Sin seleccionar --";
    String COVID = "-- Sin seleccionar --";

    //String de los inputs
    String Cedula = "";
    String Nombre = "";
    String Apellido = "";
    String Teléfono = "";
    String Email = "";
    DateTime Fecha;
    String Direccion = "";
    String Justificacion = "";

    String msj;



    //Metodos para manejar los Selects
    public void provincias(ChangeEventArgs e)
    {
        provincia = e.Value.ToString();
    }

    public void TipoDeSangre(ChangeEventArgs e)
    {
        TipoSangre = e.Value.ToString();
    }

    public void COVID19(ChangeEventArgs e)
    {
        COVID = e.Value.ToString();
    }

    void Put()
    {

    }

    //Variables para el mapa
    int zoom = 6;

    //Metodo para manejar el mapa y colocar la Latitud y Longitud
    void OnMapClick(GoogleMapClickEventArgs args)
    {
        NewVacunados.Latitud = args.Position.Lat;
        NewVacunados.Longitud = args.Position.Lng;
    }

    void OnMarkerClick(RadzenGoogleMapMarker marker)
    {

    }

    //Metodos para manejar la Base de Datos
    List<Vacunados> Vacunados = new List<Vacunados>();
    protected override async Task OnInitializedAsync()
    {
        await RefreshVacunados();
    }

    private async Task RefreshVacunados()
    {
        Vacunados = await service.GetVacunadosAsync();
    }

    public Vacunados NewVacunados { get; set; } = new Vacunados();
    private async Task AddNewVacunados()
    {
        //Valida si la persona ya se registro
        foreach (var Vacunado in Vacunados)
        {
            if(Vacunado.Cedula == Cedula)
            {
                msj = "Esta cedula ya esta registrada";
                return;
            }
        }

        //valida que los campos esten llenos
        if (Cedula != "" || Nombre != "" || Apellido != "" || Teléfono != "" || Email != "" || Direccion != "")
        {

            //Agrego los valores, seleccionados de los selects
            NewVacunados.Provincia = provincia;
            NewVacunados.TipoDeSangre = TipoSangre;
            NewVacunados.COVID = COVID;

            NewVacunados.Cedula = Cedula;
            NewVacunados.Nombre = Nombre;
            NewVacunados.Apellido = Apellido;
            NewVacunados.Teléfono = Teléfono;
            NewVacunados.Email = Email;
            NewVacunados.Fecha = Fecha;
            NewVacunados.Direccion = Direccion;
            NewVacunados.Justificacion = Justificacion;

            await service.AddVacunadosAsync(NewVacunados);
            NewVacunados = new Vacunados();
            await RefreshVacunados();

            msj = "Gracias " + Nombre +" "+ Apellido + "Por llenar este formulario :)";

        }
        else
        {
            msj = "Algunos campos aun no se han completado";
        }


    }


    Vacunados UpdateVacunados = new Vacunados();
    private void SetVacunadosForUpdate(Vacunados Vacunado)
    {
        UpdateVacunados = Vacunado;
    }

    private async Task UpdateVacunadosData()
    {
        await service.UpdateVacunadosAsync(UpdateVacunados);
        await RefreshVacunados();
    }

    private async Task DeleteVacunados(Vacunados Vacunado)
    {
        await service.DeleteVacunadosAsync(Vacunado);
        await RefreshVacunados();
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private VacunadosServices service { get; set; }
    }
}
#pragma warning restore 1591
